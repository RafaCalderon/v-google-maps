"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("vue");function he(o,e,t,n){function s(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function d(u){try{c(n.next(u))}catch(h){l(h)}}function r(u){try{c(n.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):s(u.value).then(d,r)}c((n=n.apply(o,[])).next())})}function de(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var fe=function o(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(s=n;s--!==0;)if(!o(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){var l=i[s];if(!o(e[l],t[l]))return!1}return!0}return e!==e&&t!==t},pe=de(fe);const H="__googleMapsScriptId";var R;(function(o){o[o.INITIALIZED=0]="INITIALIZED",o[o.LOADING=1]="LOADING",o[o.SUCCESS=2]="SUCCESS",o[o.FAILURE=3]="FAILURE"})(R||(R={}));class j{constructor({apiKey:e,authReferrerPolicy:t,channel:n,client:s,id:i=H,language:l,libraries:d=[],mapIds:r,nonce:c,region:u,retries:h=3,url:y="https://maps.googleapis.com/maps/api/js",version:m}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=n,this.client=s,this.id=i||H,this.language=l,this.libraries=d,this.mapIds=r,this.nonce=c,this.region=u,this.retries=h,this.url=y,this.version=m,j.instance){if(!pe(this.options,j.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(j.instance.options)}`);return j.instance}j.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?R.FAILURE:this.done?R.SUCCESS:this.loading?R.LOADING:R.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(n=>{n?t(n.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(i=>!n[i]&&delete n[i]),!((t=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(i=>{let l,d,r,c="The Google Maps JavaScript API",u="google",h="importLibrary",y="__ib__",m=document,f=window;f=f[u]||(f[u]={});const v=f.maps||(f.maps={}),p=new Set,g=new URLSearchParams,k=()=>l||(l=new Promise((M,w)=>he(this,void 0,void 0,function*(){var _;yield d=m.createElement("script"),d.id=this.id,g.set("libraries",[...p]+"");for(r in i)g.set(r.replace(/[A-Z]/g,O=>"_"+O[0].toLowerCase()),i[r]);g.set("callback",u+".maps."+y),d.src=this.url+"?"+g,v[y]=M,d.onerror=()=>l=w(Error(c+" could not load.")),d.nonce=this.nonce||((_=m.querySelector("script[nonce]"))===null||_===void 0?void 0:_.nonce)||"",m.head.append(d)})));v[h]?console.warn(c+" only loads once. Ignoring:",i):v[h]=(M,...w)=>p.add(M)&&k().then(()=>v[h](M,...w))})(n);const s=this.libraries.map(i=>this.importLibrary(i));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),i=>{const l=new ErrorEvent("error",{error:i});this.loadErrorCallback(l)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const L=a.ref(null),te=a.ref(null),ne=a.ref(null),re=a.ref(null),oe=a.ref(null);async function me(o,e=[]){L.value||(L.value=new j({apiKey:o,libraries:e}),te.value=await L.value.importLibrary("core"),ne.value=await L.value.importLibrary("maps"),re.value=await L.value.importLibrary("marker"),oe.value=await L.value.importLibrary("visualization"))}function I(){return{maps:ne,init:me,core:te,loader:L,markers:re,visualization:oe}}function ve(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var B,W;function ge(){return W||(W=1,B=function o(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(s=n;s--!==0;)if(!o(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){var l=i[s];if(!o(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}),B}var ye=ge();const E=ve(ye),A=Symbol("map"),se=Symbol("marker"),ie=Symbol("marker-clusterer"),we=a.defineComponent({__name:"VGoogleMap",props:{class:{},zoom:{},options:{},center:{}},emits:["ready","update:zoom","click","update:center"],setup(o,{expose:e,emit:t}){const n=o,s=t,{maps:i}=I(),l=a.ref(!1),d=a.getCurrentInstance(),r=a.ref(n.zoom),c=a.ref(n.center),u=a.ref(null),h=a.ref(null);let y=null,m=null,f=null;a.onMounted(async()=>{var g,k;!i.value||!h.value||(u.value=a.markRaw(new i.value.Map(h.value,{...n.options,zoom:n.zoom??((g=n.options)==null?void 0:g.zoom),center:n.center??((k=n.options)==null?void 0:k.center)})),l.value=!0,await a.nextTick(),v(),s("ready"))});function v(){var k;if(p(),!u.value)return;const g=(k=d==null?void 0:d.vnode)==null?void 0:k.props;g!=null&&g.onClick&&(y=u.value.addListener("click",M=>{s("click",M)})),g!=null&&g["onUpdate:center"]&&(m=u.value.addListener("dragend",()=>{var w,_;const M=(_=(w=u.value)==null?void 0:w.getCenter())==null?void 0:_.toJSON();M&&(c.value={...M},s("update:center",c.value))})),g!=null&&g["onUpdate:zoom"]&&(f=u.value.addListener("zoom_changed",()=>{var M;r.value=((M=u.value)==null?void 0:M.getZoom())??0,s("update:zoom",r.value)}))}function p(){y==null||y.remove(),m==null||m.remove(),f==null||f.remove()}return a.watch(()=>n.options,(g,k)=>{!u.value||E(g,k)||u.value.setOptions(n.options)},{deep:!0}),a.watch(()=>n.center,g=>{!u.value||!g||E(g,c.value)||u.value.setCenter({...g})}),a.watch(()=>n.zoom,g=>{!u.value||!g||E(g,r.value)||u.value.setZoom(g)}),e({map:u}),a.provide(A,u),a.onBeforeUnmount(()=>{p(),u.value=null}),(g,k)=>(a.openBlock(),a.createElementBlock(a.Fragment,null,[a.createElementVNode("div",{ref_key:"mapRef",ref:h,class:a.normalizeClass(n.class)},null,2),l.value?a.renderSlot(g.$slots,"default",{key:0}):a.createCommentVNode("",!0)],64))}}),ke=a.defineComponent({name:"VGoogleCircle",props:{options:{required:!0,type:Object},center:{default:null,type:Object},radius:{default:null,type:Number}},emits:["click","update:center","update:radius"],setup(o,{emit:e,expose:t,slots:n}){const{maps:s}=I(),i=a.inject(A,a.ref(null)),l=a.getCurrentInstance(),d=a.ref(o.center),r=a.ref(o.radius),c=a.ref(null);let u=null,h=null,y=null;a.onMounted(()=>{var v,p;i.value&&s.value&&(c.value=a.markRaw(new s.value.Circle({...o.options,map:i.value,center:o.center??((v=o.options)==null?void 0:v.center),radius:o.radius??((p=o.options)==null?void 0:p.radius)})),m())});function m(){var p;if(f(),!c.value)return;const v=(p=l==null?void 0:l.vnode)==null?void 0:p.props;v!=null&&v.onClick&&(u=c.value.addListener("click",g=>{e("click",g)})),v!=null&&v["onUpdate:radius"]&&(h=c.value.addListener("radius_changed",()=>{var g;r.value=((g=c.value)==null?void 0:g.getRadius())??0,e("update:radius",r.value)})),v!=null&&v["onUpdate:center"]&&(y=c.value.addListener("center_changed",()=>{var k,M;const g=(M=(k=c.value)==null?void 0:k.getCenter())==null?void 0:M.toJSON();g&&(d.value={...g},e("update:center",d.value))}))}function f(){u==null||u.remove(),h==null||h.remove(),y==null||y.remove()}return a.watch(()=>o.options,(v,p)=>{!c.value||E(v,p)||c.value.setOptions(o.options)},{deep:!0}),a.watch(()=>o.center,v=>{!c.value||!v||E(v,d.value)||c.value.setCenter({...v})}),a.watch(()=>o.radius,v=>{!c.value||!v||E(v,r.value)||c.value.setRadius(v)}),t({circle:c}),a.onBeforeUnmount(()=>{f(),c.value&&(c.value.setMap(null),c.value=null)}),()=>{var v;return(v=n.default)==null?void 0:v.call(n)}}}),Me=a.defineComponent({name:"VGoogleHeatmap",props:{options:{required:!0,type:Object}},setup(o,{expose:e,slots:t}){const{visualization:n}=I(),s=a.inject(A,a.ref(null)),i=a.ref(null);return a.onMounted(()=>{s.value&&n.value&&(i.value=a.markRaw(new n.value.HeatmapLayer({map:s.value,...o.options})))}),a.watch(()=>o.options,(l,d)=>{!i.value||E(l,d)||i.value.setOptions(o.options)},{deep:!0}),e({heatmap:i}),a.onBeforeUnmount(()=>{i.value&&(i.value.setMap(null),i.value=null)}),()=>{var l;return(l=t.default)==null?void 0:l.call(t)}}}),_e=a.defineComponent({name:"VGooglePolygon",props:{options:{required:!0,type:Object},modelValue:{default:null,type:Object}},emits:["click","mouseover","mouseout","contextmenu","update:model-value"],setup(o,{emit:e,expose:t,slots:n}){const{maps:s}=I(),i=a.inject(A,a.ref(null)),l=a.getCurrentInstance(),d=a.ref(o.modelValue),r=a.ref(null);let c=null,u=null,h=null,y=null,m=null;a.onMounted(()=>{var p;i.value&&s.value&&(r.value=a.markRaw(new s.value.Polygon({...o.options,map:i.value,paths:o.modelValue?[...o.modelValue]:(p=o.options)==null?void 0:p.paths})),f())});function f(){var g;if(v(),!r.value)return;const p=(g=l==null?void 0:l.vnode)==null?void 0:g.props;p!=null&&p.onClick&&(c=r.value.addListener("click",k=>{e("click",k)})),p!=null&&p.onContextmenu&&(m=r.value.addListener("contextmenu",k=>{e("contextmenu",k)})),p!=null&&p.onMouseout&&(h=r.value.addListener("mouseout",k=>{e("mouseout",k)})),p!=null&&p.onMouseover&&(y=r.value.addListener("mouseover",k=>{e("mouseover",k)})),p!=null&&p["onUpdate:modelValue"]&&(u=r.value.addListener("mouseup",()=>{var M,w,_;const k=(_=(w=(M=r.value)==null?void 0:M.getPath())==null?void 0:w.getArray())==null?void 0:_.map(O=>O.toJSON());k&&(d.value=[...k],e("update:model-value",d.value))}))}function v(){c==null||c.remove(),u==null||u.remove(),h==null||h.remove(),y==null||y.remove(),m==null||m.remove()}return a.watch(()=>o.options,(p,g)=>{!r.value||E(p,g)||r.value.setOptions(o.options)},{deep:!0}),a.watch(()=>o.modelValue,p=>{!r.value||!p||E(p,d.value)||r.value.setPath(p)}),t({polygon:r}),a.onBeforeUnmount(()=>{v(),r.value&&(r.value.setMap(null),r.value=null)}),()=>{var p;return(p=n.default)==null?void 0:p.call(n)}}}),Ee={key:0,style:{display:"none"}},ae=a.defineComponent({__name:"VGoogleInfoWindow",props:a.mergeModels({options:{default:null}},{modelValue:{type:Boolean,default:!1,required:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(o,{expose:e}){const t=o,n=a.useModel(o,"modelValue"),s=a.useSlots(),{maps:i}=I(),l=a.inject(A,a.ref(null)),d=a.inject(se,a.ref(null)),r=a.ref(!1),c=a.ref(),u=a.ref(null);let h=null,y=null;a.onMounted(async()=>{var k;i.value&&(u.value=a.markRaw(new i.value.InfoWindow({...t.options,content:m.value&&!f.value?c.value:(k=t.options)==null?void 0:k.content})),await a.nextTick(),v(),n.value&&g())});const m=a.computed(()=>{var k,M;return((M=(k=s.default)==null?void 0:k.call(s,{}))==null?void 0:M[0])??null}),f=a.computed(()=>{var k;return((k=m.value)==null?void 0:k.type)===Comment});function v(){!d.value||!u.value||(y=d.value.addListener("click",g),h=u.value.addListener("closeclick",g))}function p(){y==null||y.remove(),h==null||h.remove()}function g(){!u.value||!l.value||(r.value=!r.value,r.value?u.value.open({map:l.value,anchor:d.value}):u.value.close(),n.value=r.value)}return a.watch(()=>t.options,(k,M)=>{!u.value||E(k,M)||u.value.setOptions(t.options)},{deep:!0}),a.watch(n,k=>{k===null||k===r.value||g()}),e({infoWindow:u}),a.onBeforeUnmount(()=>{p(),u.value&&(u.value.close(),u.value=null)}),(k,M)=>m.value&&!f.value?(a.openBlock(),a.createElementBlock("div",Ee,[a.createElementVNode("div",{ref_key:"contentRef",ref:c},[a.renderSlot(k.$slots,"default")],512)])):a.createCommentVNode("",!0)}}),Ce={key:0,style:{display:"none"}},be=a.defineComponent({__name:"VGoogleMarker",props:{options:{default:void 0},modelValue:{default:null}},emits:["click","update:model-value"],setup(o,{expose:e,emit:t}){const n=o,s=t,i=a.useSlots(),{markers:l}=I(),d=a.inject(A,a.ref(null)),r=a.inject(ie,a.ref(null)),c=a.getCurrentInstance(),u=a.ref(),h=a.ref(n.modelValue);let y=null,m=null;const f=a.ref(null);a.onMounted(async()=>{var w,_;l.value&&(f.value=a.markRaw(new l.value.AdvancedMarkerElement({...n.options,position:n.modelValue??((w=n.options)==null?void 0:w.position),map:r.value===null?d.value:null,content:v.value&&!p.value&&!g.value?u.value:(_=n.options)==null?void 0:_.content})),await a.nextTick(),r.value&&r.value.addMarker(f.value),k())});const v=a.computed(()=>{var w,_;return((_=(w=i.default)==null?void 0:w.call(i,{}))==null?void 0:_[0])??null}),p=a.computed(()=>{var w;return((w=v.value)==null?void 0:w.type)===Comment}),g=a.computed(()=>{var w;return((w=v.value)==null?void 0:w.type)===ae});function k(){var _;if(M(),!f.value)return;const w=(_=c==null?void 0:c.vnode)==null?void 0:_.props;w!=null&&w["onUpdate:modelValue"]&&(m=f.value.addListener("dragend",O=>{var T;const b=(T=O.latLng)==null?void 0:T.toJSON();b&&(h.value={...b},s("update:model-value",h.value))})),w!=null&&w.onClick&&(y=f.value.addListener("click",O=>{s("click",O)}))}function M(){y==null||y.remove(),m==null||m.remove()}return a.watch(()=>n.options,(w,_)=>{!f.value||E(w,_)||(w!=null&&w.title&&(f.value.title=w.title),w!=null&&w.zIndex&&(f.value.zIndex=w.zIndex),w!=null&&w.content&&(f.value.content=w.content),w!=null&&w.position&&(f.value.position=w.position),w!=null&&w.gmpDraggable&&(f.value.gmpDraggable=w.gmpDraggable))},{deep:!0}),a.watch(()=>n.modelValue,w=>{!f.value||E(w,h.value)||(f.value.position=w)}),e({marker:f}),a.provide(se,f),a.onBeforeUnmount(()=>{M(),f.value&&(r.value&&r.value.removeMarker(f.value),f.value.map=null,f.value=null)}),(w,_)=>v.value&&!p.value?(a.openBlock(),a.createElementBlock("div",Ce,[a.createElementVNode("div",{ref_key:"contentRef",ref:u},[a.renderSlot(w.$slots,"default")],512)])):a.createCommentVNode("",!0)}}),Oe=a.defineComponent({name:"VGooglePolyline",props:{options:{required:!0,type:Object},modelValue:{default:null,type:Object}},emits:["click","contextmenu","update:model-value"],setup(o,{emit:e,expose:t,slots:n}){const{maps:s}=I(),i=a.inject(A,a.ref(null)),l=a.getCurrentInstance(),d=a.ref(o.modelValue),r=a.ref(null);let c=null,u=null,h=null;a.onMounted(()=>{var f;i.value&&s.value&&(r.value=a.markRaw(new s.value.Polyline({...o.options,map:i.value,path:o.modelValue?[...o.modelValue]:(f=o.options)==null?void 0:f.path})),y())});function y(){var v;if(m(),!r.value)return;const f=(v=l==null?void 0:l.vnode)==null?void 0:v.props;f!=null&&f.onClick&&(c=r.value.addListener("click",p=>{e("click",p)})),f!=null&&f.onContextmenu&&(h=r.value.addListener("contextmenu",p=>{e("contextmenu",p)})),f!=null&&f["onUpdate:modelValue"]&&(u=r.value.addListener("mouseup",()=>{var g,k,M;const p=(M=(k=(g=r.value)==null?void 0:g.getPath())==null?void 0:k.getArray())==null?void 0:M.map(w=>w.toJSON());p&&(d.value=[...p],e("update:model-value",d.value))}))}function m(){c==null||c.remove(),u==null||u.remove(),h==null||h.remove()}return a.watch(()=>o.options,(f,v)=>{!r.value||E(f,v)||r.value.setOptions(o.options)},{deep:!0}),a.watch(()=>o.modelValue,f=>{!r.value||!f||E(f,d.value)||r.value.setPath(f)}),t({polyline:r}),a.onBeforeUnmount(()=>{m(),r.value&&(r.value.setMap(null),r.value=null)}),()=>{var f;return(f=n.default)==null?void 0:f.call(n)}}}),Ie=a.defineComponent({name:"VGoogleRectangle",props:{options:{required:!0,type:Object},modelValue:{default:null,type:Object}},emits:["click","update:model-value"],setup(o,{emit:e,expose:t,slots:n}){const{maps:s}=I(),i=a.inject(A,a.ref(null)),l=a.getCurrentInstance(),d=a.ref(o.modelValue),r=a.ref(null);let c=null,u=null;a.onMounted(()=>{var m;i.value&&s.value&&(r.value=a.markRaw(new s.value.Rectangle({...o.options,map:i.value,bounds:o.modelValue??((m=o.options)==null?void 0:m.bounds)})),h())});function h(){var f;if(y(),!r.value)return;const m=(f=l==null?void 0:l.vnode)==null?void 0:f.props;m!=null&&m.onClick&&(c=r.value.addListener("click",v=>{e("click",v)})),m!=null&&m["onUpdate:modelValue"]&&(u=r.value.addListener("bounds_changed",()=>{var p,g;const v=(g=(p=r.value)==null?void 0:p.getBounds())==null?void 0:g.toJSON();v&&(d.value={...v},e("update:model-value",d.value))}))}function y(){c==null||c.remove(),u==null||u.remove()}return a.watch(()=>o.options,(m,f)=>{!r.value||E(m,f)||r.value.setOptions(o.options)},{deep:!0}),a.watch(()=>o.modelValue,m=>{!r.value||!m||E(m,d.value)||r.value.setBounds(m)}),t({rectangle:r}),a.onBeforeUnmount(()=>{y(),r.value&&(r.value.setMap(null),r.value=null)}),()=>{var m;return(m=n.default)==null?void 0:m.call(n)}}}),Y=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],D=1,U=8;class J{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");const s=n>>4;if(s!==D)throw new Error(`Got v${s} data when expected v${D}.`);const i=Y[n&15];if(!i)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(e,2,1),[d]=new Uint32Array(e,4,1);return new J(d,l,i,e)}constructor(e,t=64,n=Float64Array,s){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=Y.indexOf(this.ArrayType),l=e*2*this.ArrayType.BYTES_PER_ELEMENT,d=e*this.IndexArrayType.BYTES_PER_ELEMENT,r=(8-d%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,U,e),this.coords=new this.ArrayType(this.data,U+d+r,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(U+l+d+r),this.ids=new this.IndexArrayType(this.data,U,e),this.coords=new this.ArrayType(this.data,U+d+r,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(D<<4)+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return z(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:l,nodeSize:d}=this,r=[0,i.length-1,0],c=[];for(;r.length;){const u=r.pop()||0,h=r.pop()||0,y=r.pop()||0;if(h-y<=d){for(let p=y;p<=h;p++){const g=l[2*p],k=l[2*p+1];g>=e&&g<=n&&k>=t&&k<=s&&c.push(i[p])}continue}const m=y+h>>1,f=l[2*m],v=l[2*m+1];f>=e&&f<=n&&v>=t&&v<=s&&c.push(i[m]),(u===0?e<=f:t<=v)&&(r.push(y),r.push(m-1),r.push(1-u)),(u===0?n>=f:s>=v)&&(r.push(m+1),r.push(h),r.push(1-u))}return c}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:i,nodeSize:l}=this,d=[0,s.length-1,0],r=[],c=n*n;for(;d.length;){const u=d.pop()||0,h=d.pop()||0,y=d.pop()||0;if(h-y<=l){for(let p=y;p<=h;p++)Q(i[2*p],i[2*p+1],e,t)<=c&&r.push(s[p]);continue}const m=y+h>>1,f=i[2*m],v=i[2*m+1];Q(f,v,e,t)<=c&&r.push(s[m]),(u===0?e-n<=f:t-n<=v)&&(d.push(y),d.push(m-1),d.push(1-u)),(u===0?e+n>=f:t+n>=v)&&(d.push(m+1),d.push(h),d.push(1-u))}return r}}function z(o,e,t,n,s,i){if(s-n<=t)return;const l=n+s>>1;le(o,e,l,n,s,i),z(o,e,t,n,l-1,1-i),z(o,e,t,l+1,s,1-i)}function le(o,e,t,n,s,i){for(;s>n;){if(s-n>600){const c=s-n+1,u=t-n+1,h=Math.log(c),y=.5*Math.exp(2*h/3),m=.5*Math.sqrt(h*y*(c-y)/c)*(u-c/2<0?-1:1),f=Math.max(n,Math.floor(t-u*y/c+m)),v=Math.min(s,Math.floor(t+(c-u)*y/c+m));le(o,e,t,f,v,i)}const l=e[2*t+i];let d=n,r=s;for(G(o,e,n,t),e[2*s+i]>l&&G(o,e,n,s);d<r;){for(G(o,e,d,r),d++,r--;e[2*d+i]<l;)d++;for(;e[2*r+i]>l;)r--}e[2*n+i]===l?G(o,e,n,r):(r++,G(o,e,r,s)),r<=t&&(n=r+1),t<=r&&(s=r-1)}}function G(o,e,t,n){V(o,t,n),V(e,2*t,2*n),V(e,2*t+1,2*n+1)}function V(o,e,t){const n=o[e];o[e]=o[t],o[t]=n}function Q(o,e,t,n){const s=o-t,i=e-n;return s*s+i*i}const Ae={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:o=>o},X=Math.fround||(o=>e=>(o[0]=+e,o[0]))(new Float32Array(1)),P=2,x=3,$=4,S=5,ue=6;class Se{constructor(e){this.options=Object.assign(Object.create(Ae),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:s}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const l=[];for(let r=0;r<e.length;r++){const c=e[r];if(!c.geometry)continue;const[u,h]=c.geometry.coordinates,y=X(Z(u)),m=X(F(h));l.push(y,m,1/0,r,-1,1),this.options.reduce&&l.push(0)}let d=this.trees[s+1]=this._createTree(l);t&&console.timeEnd(i);for(let r=s;r>=n;r--){const c=+Date.now();d=this.trees[r]=this._createTree(this._cluster(d,r)),t&&console.log("z%d: %d clusters in %dms",r,d.numItems,+Date.now()-c)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[1]));let i=e[2]===180?180:((e[2]+180)%360+360)%360-180;const l=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const h=this.getClusters([n,s,180,l],t),y=this.getClusters([-180,s,i,l],t);return h.concat(y)}const d=this.trees[this._limitZoom(t)],r=d.range(Z(n),F(l),Z(i),F(s)),c=d.data,u=[];for(const h of r){const y=this.stride*h;u.push(c[y+S]>1?ee(c,y,this.clusterProps):this.points[c[y+x]])}return u}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),s="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(s);const l=i.data;if(t*this.stride>=l.length)throw new Error(s);const d=this.options.radius/(this.options.extent*Math.pow(2,n-1)),r=l[t*this.stride],c=l[t*this.stride+1],u=i.within(r,c,d),h=[];for(const y of u){const m=y*this.stride;l[m+$]===e&&h.push(l[m+S]>1?ee(l,m,this.clusterProps):this.points[l[m+x]])}if(h.length===0)throw new Error(s);return h}getLeaves(e,t,n){t=t||10,n=n||0;const s=[];return this._appendLeaves(s,e,t,n,0),s}getTile(e,t,n){const s=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:l,radius:d}=this.options,r=d/l,c=(n-r)/i,u=(n+1+r)/i,h={features:[]};return this._addTileFeatures(s.range((t-r)/i,c,(t+1+r)/i,u),s.data,t,n,i,h),t===0&&this._addTileFeatures(s.range(1-r/i,c,1,u),s.data,i,n,i,h),t===i-1&&this._addTileFeatures(s.range(0,c,r/i,u),s.data,-1,n,i,h),h.features.length?h:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,n.length!==1)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,s,i){const l=this.getChildren(t);for(const d of l){const r=d.properties;if(r&&r.cluster?i+r.point_count<=s?i+=r.point_count:i=this._appendLeaves(e,r.cluster_id,n,s,i):i<s?i++:e.push(d),e.length===n)break}return i}_createTree(e){const t=new J(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,s,i,l){for(const d of e){const r=d*this.stride,c=t[r+S]>1;let u,h,y;if(c)u=ce(t,r,this.clusterProps),h=t[r],y=t[r+1];else{const v=this.points[t[r+x]];u=v.properties;const[p,g]=v.geometry.coordinates;h=Z(p),y=F(g)}const m={type:1,geometry:[[Math.round(this.options.extent*(h*i-n)),Math.round(this.options.extent*(y*i-s))]],tags:u};let f;c||this.options.generateId?f=t[r+x]:f=this.points[t[r+x]].id,f!==void 0&&(m.id=f),l.features.push(m)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:s,reduce:i,minPoints:l}=this.options,d=n/(s*Math.pow(2,t)),r=e.data,c=[],u=this.stride;for(let h=0;h<r.length;h+=u){if(r[h+P]<=t)continue;r[h+P]=t;const y=r[h],m=r[h+1],f=e.within(r[h],r[h+1],d),v=r[h+S];let p=v;for(const g of f){const k=g*u;r[k+P]>t&&(p+=r[k+S])}if(p>v&&p>=l){let g=y*v,k=m*v,M,w=-1;const _=((h/u|0)<<5)+(t+1)+this.points.length;for(const O of f){const b=O*u;if(r[b+P]<=t)continue;r[b+P]=t;const T=r[b+S];g+=r[b]*T,k+=r[b+1]*T,r[b+$]=_,i&&(M||(M=this._map(r,h,!0),w=this.clusterProps.length,this.clusterProps.push(M)),i(M,this._map(r,b)))}r[h+$]=_,c.push(g/p,k/p,1/0,_,-1,p),i&&c.push(w)}else{for(let g=0;g<u;g++)c.push(r[h+g]);if(p>1)for(const g of f){const k=g*u;if(!(r[k+P]<=t)){r[k+P]=t;for(let M=0;M<u;M++)c.push(r[k+M])}}}}return c}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+S]>1){const l=this.clusterProps[e[t+ue]];return n?Object.assign({},l):l}const s=this.points[e[t+x]].properties,i=this.options.map(s);return n&&i===s?Object.assign({},i):i}}function ee(o,e,t){return{type:"Feature",id:o[e+x],properties:ce(o,e,t),geometry:{type:"Point",coordinates:[xe(o[e]),Pe(o[e+1])]}}}function ce(o,e,t){const n=o[e+S],s=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?`${Math.round(n/100)/10}k`:n,i=o[e+ue],l=i===-1?{}:Object.assign({},t[i]);return Object.assign(l,{cluster:!0,cluster_id:o[e+x],point_count:n,point_count_abbreviated:s})}function Z(o){return o/360+.5}function F(o){const e=Math.sin(o*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function xe(o){return(o-.5)*360}function Pe(o){const e=(180-o*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Le(o,e){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&e.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(t[n[s]]=o[n[s]]);return t}class C{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class q{constructor({markers:e,position:t}){this.markers=e,t&&(t instanceof google.maps.LatLng?this._position=t:this._position=new google.maps.LatLng(t))}get bounds(){if(this.markers.length===0&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(C.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>C.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(C.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class je{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return Re(e)}}const Re=o=>o.map(t=>new q({position:C.getPosition(t),markers:[t]}));class Te extends je{constructor(e){var{maxZoom:t,radius:n=60}=e,s=Le(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new Se(Object.assign({maxZoom:this.maxZoom,radius:n},s))}calculate(e){let t=!1;const n={zoom:e.map.getZoom()};if(!E(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const s=this.markers.map(i=>{const l=C.getPosition(i);return{type:"Feature",geometry:{type:"Point",coordinates:[l.lng(),l.lat()]},properties:{marker:i}}});this.superCluster.load(s)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!E(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(t=>this.transformCluster(t))}transformCluster({geometry:{coordinates:[e,t]},properties:n}){if(n.cluster)return new q({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map(i=>i.properties.marker),position:{lat:t,lng:e}});const s=n.marker;return new q({markers:[s],position:C.getPosition(s)})}}class Ue{constructor(e,t){this.markers={sum:e.length};const n=t.map(i=>i.count),s=n.reduce((i,l)=>i+l,0);this.clusters={count:t.length,markers:{mean:s/t.length,sum:s,min:Math.min(...n),max:Math.max(...n)}}}}class Ge{render({count:e,position:t},n,s){const l=`<svg fill="${e>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>
</svg>`,d=`Cluster of ${e} markers`,r=Number(google.maps.Marker.MAX_ZINDEX)+e;if(C.isAdvancedMarkerAvailable(s)){const h=new DOMParser().parseFromString(l,"image/svg+xml").documentElement;h.setAttribute("transform","translate(0 25)");const y={map:s,position:t,zIndex:r,title:d,content:h};return new google.maps.marker.AdvancedMarkerElement(y)}const c={position:t,zIndex:r,title:d,icon:{url:`data:image/svg+xml;base64,${btoa(l)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(c)}}function Ne(o,e){for(let t in e.prototype)o.prototype[t]=e.prototype[t]}class K{constructor(){Ne(K,google.maps.OverlayView)}}var N;(function(o){o.CLUSTERING_BEGIN="clusteringbegin",o.CLUSTERING_END="clusteringend",o.CLUSTER_CLICK="click"})(N||(N={}));const Ze=(o,e,t)=>{t.fitBounds(e.bounds)};class Fe extends K{constructor({map:e,markers:t=[],algorithmOptions:n={},algorithm:s=new Te(n),renderer:i=new Ge,onClusterClick:l=Ze}){super(),this.markers=[...t],this.clusters=[],this.algorithm=s,this.renderer=i,this.onClusterClick=l,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(n=>{this.addMarker(n,!0)}),t||this.render()}removeMarker(e,t){const n=this.markers.indexOf(e);return n===-1?!1:(C.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){let n=!1;return e.forEach(s=>{n=this.removeMarker(s,!0)||n}),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,N.CLUSTERING_BEGIN,this);const{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||n==null){const s=new Set;for(const l of t)l.markers.length==1&&s.add(l.markers[0]);const i=[];for(const l of this.clusters)l.marker!=null&&(l.markers.length==1?s.has(l.marker)||C.setMap(l.marker,null):i.push(l.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>i.forEach(l=>C.setMap(l,null)))}google.maps.event.trigger(this,N.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>C.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){const e=new Ue(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),n.markers.forEach(s=>C.setMap(s,null)),this.onClusterClick&&n.marker.addListener("click",s=>{google.maps.event.trigger(this,N.CLUSTER_CLICK,n),this.onClusterClick(s,n,t)})),C.setMap(n.marker,t)})}}const Be=a.defineComponent({name:"VGoogleMarkerClusterer",props:{options:{default:null,type:Object}},setup(o,{slots:e}){const t=a.inject(A,a.ref(null)),n=a.ref(null);return t.value&&(n.value=a.markRaw(new Fe({...o.options,map:t.value}))),a.provide(ie,n),a.onBeforeUnmount(()=>{n.value&&(n.value.setMap(null),n.value.clearMarkers(),n.value=null)}),()=>{var s;return(s=e.default)==null?void 0:s.call(e)}}});function De(o){o.component("VGoogleMap",we),o.component("VGoogleCircle",ke),o.component("VGoogleMarker",be),o.component("VGoogleHeatmap",Me),o.component("VGooglePolygon",_e),o.component("VGooglePolyline",Oe),o.component("VGoogleRectangle",Ie),o.component("VGoogleInfoWindow",ae),o.component("VGoogleMarkerClusterer",Be)}exports.useGoogleMapsLoader=I;exports.vGoogleMaps=De;
